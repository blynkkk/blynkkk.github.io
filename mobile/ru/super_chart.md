
### Диаграмма (SuperChart)

Диаграмма используется для живой визуализации и хранения данных. Вы можете использовать виджет для логирования данных датчиков,  бинарных событий и многого другого.

Чтобы использовать виджет Диаграмма, вам нужно будет передать данные с оборудования с желаемым интервалом, используя таймеры.
[Здесь приведен](https://examples.blynk.cc/?board=ESP8266&shield=ESP8266%20WiFi&example=GettingStarted%2FPushData) базовый пример передачи данных.

#### Взаимодействие:
- **Переключение между режимами текущий и временной** Нажмите диапазоны времени в нижней части виджета, чтобы изменить масштаб Диаграммы по времени.

- **Тап по легенде графиков**  показать или скрыть поток данных.

- **Долги тап на графике** покажет метку времени и соответствующие значения.

- **Быстро проведите пальцем влево или вправо, чтобы увидеть предыдущие данные** впоследствии вы можете прокручивать данные назад и вперед в пределах заданного временного диапазона.

- **Полноэкранный режим** нажмите эту кнопку, чтобы открыть полноэкранный режим в альбомной ориентации.

Чтобы выйти из режима полного экрана, просто поверните телефон обратно в портретный режим. График должен вращаться автоматически. В полноэкранном режиме вы увидите X (время) и несколько шкал Y.
Полноэкранный режим можно отключить в настройках виджета.

- **Кнопка меню**
 Кнопка меню откроет дополнительные функции:
  - Экспорт в CSV
  - Стереть данные на сервере

#### Настройки диаграммы:

- **Заголовок диаграммы (Chart Title)** общее наименование диаграммы.

- **Размер шрифта заголовка (Title Font Size)** выберите из 3 размеров шрифта.

- **Выравнивание заголовка (Title Alignment)** выберите выравнивание заголовка диаграммы. Этот параметр влияет на положение заголовка и легенды в виджете.

- **Показать ось X (время) (Show x-axis (time))** выберите настройку, если хотите показать шкалу времени внизу графика.

- **Автоматическое масштабирование для всех потоков данных (Override Auto Scaling for All Datastreams)** отключение этой опции позволит выполнить ручную настройку для оси Y (см. ниже).

- **Выбор масштаба времени (Time ranges picker)** Позволяет выбрать необходимые периоды (`15m`,` 30m`, `1h`,` 3h`, ...) и разрешение для вашего графика. Разрешение определяет, насколько подробные ваши данные. Прямо сейчас график поддерживает два типа разрешения: `standard` и `high`. Разрешение также зависит от выбранного периода. Например, `standard` разрешение для `1d` означает, что вы будете получать 24 значения в день (одно в час), а при `high` разрешении вы будете получать за` 1d` 1440 значений в день (одно в минуту).

- **Потоки данных (Datastreams)** добавить потоки данных (см. ниже, как настроить потоки данных).

#### Настройки потоков данных

Виджет поддерживает до 4 потоков данных.
Нажмите значок настроек потоков данных, чтобы открыть настройки.

**Дизайн (Design)** выберите доступные типы диаграмм:
 - Линейная (Line)
 - С областями (Area)
 - Гистограмма (Bar)
 - Бинарная (Binary) (приведение данных к двоичному виду)

**Цвет (Color)** выберите сплошные цвета или градиенты.

**Источник и ввод (Source and input)** - Вы можете использовать три типа источника данных:

**1. Виртуальный пин (Virtual Pin)** - выберите желаемое устройство и виртуальный пин для получения данных.

**2. Теги (Tags)** - диаграмма может агрегировать данные с нескольких устройств, используя встроенные функции агрегирования.
Например, если у вас есть 10 датчиков температуры, посылающих температуру с заданным интервалом, Вы можете отобразить среднее значение от 10 датчиков в виджете.

Использование тегов:

- **[Добавить Тэг](http://docs.blynk.cc/#blynk-main-operations-control-of-multiple-devices-tags)** на каждое устройство, с которого вы хотите агрегировать данные. Это можно сделать в настройках проекта Blynk.
- **Отправить данные в виртуальный пин (Push data to the same Virtual Pin)** на каждое устройство. (т.е. ```Blynk.virtualWrite (V0, temperature);```)
- **Выберите тег в качестве источника (Choose Tag as a source)** в виджете Диаграмма и используйте пин, куда поступают данные (т.е. V0)

**Добступные функции:** 
- `SUM` будет суммировать все входящие значения в указанный виртуальный пин со всех устройств, помеченные выбранным тегом
- `AVG` будет вычислять среднее значение
- `MED` найдет среднее значение
- `MIN` будет вычислять минимальное значение
- `MAX` будет вычислять максимальное значение

**ВАЖНО: Теги не работают в режиме реального времени.**

**3. [Выбор устройства (Device Selector)](http://docs.blynk.cc/#widgets-time-input-device-selector)**
Если вы добавите виджет Выбор устройства в свой проект, вы можете использовать его в качестве источника данных для Диаграммы.
В том случае, когда вы меняете устройство, диаграмма будет автоматически обновляться.

#### Настройки оси Y (Y-Axis Settings)
Cуществует 4 режима масштабирования данных вдоль оси Y, активируется после отключения общей настройки виджета "Автоматическое масштабирование для всех потоков данных (Override Auto Scaling for All Datastreams)".

**1. Авто (Auto)**
Данные будут автоматически масштабироваться на основе минимальных и максимальных значений заданного периода времени. Это лучший вариант для начинающих.

**2. Минимальный/Максимальный (Min/Max)**
Когда выбран этот режим, шкала Y будет установлена на выбранные вами границы значений.
Например, если ваше оборудование отправляет данные со значениями от -100 до 100, вы можете установить эти границы и данные графика будут отображены полностью.

Вы также можете визуализировать данные в другом диапазоне. Допустим, входящие данные имеют значения в диапазоне 0-55, но вы хотели бы видеть только значения в диапазоне 30-50. Вы можете настроить  диапазон, но если значения не соответствуют заданному масштабу оси Y, диаграмма будет обрезана.

**3. Процент от высоты (% of Height)**
Эта опция позволяет автоматически масштабировать входящие данные на виджете и размещать их так, как вы хотите. 
В этом режиме вы устанавливаете процент высоты виджета на экране от 0% до 100%.

Если вы установите диапазон 0-100%, это будет полная автоматическая шкала. Независимо от того, в каком диапазоне поступают данные, он всегда будет масштабирован по всей высоте виджета.

Если вы установите его на 0-25%, то график будет отображаться только на 1/4 высоты виджета.

Этот параметр очень полезен для **Бинарной диаграммы** или для визуализации нескольких потоков данных на одной и той же диаграмме разными способами.

**4. Дельта (Delta)**
Пока данные остаются в пределах заданного значения дельты, график будет автоматически масштабироваться в этом диапазоне.
Если дельта превышает диапазон, график автоматически масштабируется до минимальных/максимальных значений указанного периода.

**Суффикс (Suffix)**
Здесь вы можете указать суффикс, который будет отображаться со значениями во время длительного тап на графике.

**Разрядность (Decimals)**
Определяет формат числовых значений, когда вы нажимаете и удерживаете палец на графике. Возможные варианты: #, #.#, #.##, и т.д.

**Соединиить отсуствующие точки графика (Connect Missing Data Points)**
Если этот переключатель включен, то Диаграмма соединит все точки, даже если данные частично отсуствуют.
Если для него установлено значение «ВЫКЛ», то вы увидите пропуски в случае отсутствия данных.

**Настройки Бинарной диаграммы (Binary Chart Settings)**
Этот тип диаграммы полезен для построения двоичных данных, например, когда устройство было включено или выключено, или когда было обнаружено движение или когда был достигнут определенный порог значений.

Вам необходимо указать точку **Перехода (FLIP)**, которая будет точкой, в которой входящие данные будут принимать состояние `ИСТИНА (TRUE)` или `ЛОЖЬ (FALSE)`.

Например, вы отправляете данные в диапазоне от 0 до 1023. Если вы установите `512` в качестве точки **Перехода (FLIP)**, то все, что выше `512` (исключая 512), будет записано как `ИСТИНА (TRUE)`, любое значение ниже `512` (включая 512) будет `ЛОЖЬ (FALSE)`.

Другой пример: если вы отправляете `0 и 1` и устанавливаете `0` в качестве точки **Перехода FLIP**, то `1` будет `ИСТИНА`, а `0` будет `ЛОЖЬ`.

**Маркеры состояния (State Labels):**
Здесь вы можете указать, как `ИСТИНА/ЛОЖЬ` должны отображаться на графике когда вы нажимаете и удерживаете палец.
Например, вы можете установить значение `ИСТИНА` как `Оборудование ВКЛ`, `ЛОЖЬ` как `Оборудование ВЫКЛ`.
